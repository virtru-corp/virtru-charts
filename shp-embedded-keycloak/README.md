## Parameters

### Keycloak Chart Overrides

| Name                                 | Description                             | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------------------------------------ | --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `keycloak.fullnameOverride`          | keycloak name override                  | `keycloak`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `keycloak.image.repository`          | Keycloak Image Repo                     | `ghcr.io/opentdf/keycloak`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `keycloak.image.tag`                 | Keycloak Image Tag                      | `main`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `keycloak.image.pullPolicy`          | Keycloak Image pull policy              | `IfNotPresent`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `keycloak.command`                   | Command to start the keycloak service   | `["/opt/keycloak/bin/kc.sh","--verbose","start-dev","--http-relative-path","/auth"]`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `keycloak.postgresql.enabled`        | Use keycloak deployed postgres flag     | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `keycloak.externalDatabase.database` | Database name                           | `keycloak_database`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `keycloak.extraEnv`                  | Extra environment variables.            | `- name: CLAIMS_URL
  value: http://entitlement-pdp:3355/entitlements
- name: JAVA_OPTS_APPEND
  value: -Djgroups.dns.query={{ include "keycloak.fullname" . }}-headless
- name: KC_DB
  value: postgres
- name: KC_DB_URL_PORT
  value: "5432"
- name: KC_LOG_LEVEL
  value: INFO
- name: KC_HOSTNAME_STRICT
  value: "false"
- name: KC_HOSTNAME_STRICT_BACKCHANNEL
  value: "false"
- name: KC_HOSTNAME_STRICT_HTTPS
  value: "false"
- name: KC_HOSTNAME_URL
  value: {{ ( include "shp.embedded.keycloak.oidc.externalUrl" . ) | quote }}
- name: KC_HOSTNAME_ADMIN_URL
  value: {{ ( include "shp.embedded.keycloak.oidc.externalUrl" . ) | quote }}
- name: KC_HTTP_ENABLED
  value: "true"
- name: KC_FEATURES
  value: "preview,token-exchange"` |
| `keycloak.extraEnvFrom`              | Extra Environment From Reference YAML   | `- secretRef:
    name: scp-embedded-keycloak-secret`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `secrets.keycloak.dbPassword`        | postgres password for keycloak svc user | `nil`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `secrets.keycloak.adminUsername`     | keycloak admin user's username          | `nil`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `secrets.keycloak.adminPassword`     | Keycloak admin user's password          | `nil`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
