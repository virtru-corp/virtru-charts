{{/*
  Secret for keycloak Bootstrapper - do not create default users
  */}}
{{- if .Values.bootstrap.keycloak }}
{{- if .Values.secrets.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "common.lib.fullname" . }}-keycloakbootstrap-secret
  labels:
    {{- include "common.lib.labels" . | nindent 4 }}
type: Opaque
stringData:
  CLIENT_SECRET: {{ .Values.secrets.keycloakBootstrap.clientSecret }}
  keycloak_admin_username: {{ .Values.secrets.keycloak.admin.user }}
  keycloak_admin_password: {{ .Values.secrets.keycloak.admin.password }}
  ATTRIBUTES_USERNAME: {{ .Values.secrets.keycloakBootstrap.attributes.username }}
  ATTRIBUTES_PASSWORD: {{ .Values.secrets.keycloakBootstrap.attributes.password }}
  CREATE_DEFAULT_USERS: "FALSE"
---
{{- end }}
{{- end }}